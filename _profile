export PATH=~/.composer/vendor/bin:/usr/local/lib/node_modules:/usr/local/share/npm/bin:/usr/local/sbin:/usr/local/bin:$PATH

# Allow to fix issues when editing file with VIM inside TMUX
alias tmux="TERM=screen-256color-bce tmux"

# vi-mode
bind -m vi-insert 'Control-l: clear-screen'
set -o vi

export LC_ALL=en_US.UTF-8       # http://stackoverflow.com/questions/1830394/python-locale-strange-error-whats-going-on-here-exactly
export CLICOLOR=1
export EDITOR=vim
export ARCHFLAGS="-Wno-error=unused-command-line-argument-hard-error-in-future" # https://langui.sh/2014/03/10/wunused-command-line-argument-hard-error-in-future-is-a-harsh-mistress/

# Config history unix commande
export HISTTIMEFORMAT="%d/%m/%y %T "
export HISTIGNORE=ls

#export http_proxy=
#export https_proxy=

#export http_proxy=fr-proxy.groupinfra.com:3128
#export https_proxy=fr-proxy.groupinfra.com:3128
#export no_proxy=localhost,127.0.0.1

## Aliases
#alias my-vim-git="vim `git status --porcelain | sed -ne 's/^ M //p' | perl -p -e 's/\n/ /'`" # Suppress " M" and replace \n by spaces
alias my-big-files='function __bigfiles() { find $1 -size +1G -exec ls -lh {} \; ; unset -f __bigfiles; }; __bigfiles' # Get big files in a given directory
alias my-ez-cc='cd ezpublish-core && php bin/php/ezcache.php --clear-all && cd ..'
alias my-dir-size='du -csh $1' # Get total size in Mo/Go of given directories
alias my-list-packages-installed='aptitude search "~i" -F "%c %p %v %d %I"' # List all packages installed on a server. "{status} {name} {version} {desc} {size}" (https://aptitude.alioth.debian.org/doc/en/ch02s05s01.html#secDisplayFormat)
alias my-restart-deamon='function __my_restart_deamon() { launchctl unload $1 && launchctl load $1; }; __my_restart_deamon'
alias my-portforward-rules='netstat -na | grep tcp4 | grep LISTEN' # Display active portforwarding rules. Rules from virtualbox should be displayed
alias my-iptables-ls='sudo iptables -t nat -L -v -n' # List all rules
alias my-iptable-rm-rule='sudo iptables -t nat -D PREROUTING 1' # Delete a rule by its number. Start with 1.
alias my-php-lint='find $1 -name *.php -exec php -l {} \;' # Lint all php files on given dir
alias my-dump-port-traffic='tcpdump -q dst port $1 and greater $2 -w network_dump.txt' # Intercept all packets (size > $2) sent to local server on the port $1 and store it to a network_dump.txt file

if [ -f ~/vim-config/_private_profile ]; then
    source ~/vim-config/_private_profile
fi

if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
fi

# autocompletion files
source ~/.bin/tmuxinator.bash
source ~/vim-config/git-completion.bash

export PS1="\[\033[1;35m\]\u\[\033[0m\]:\[\033[1;35m\]\w\[\033[0m\]$ " # 'myuser:dir$ ' (http://blog.taylormcgann.com/2012/06/13/customize-your-shell-command-prompt/)
